<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–æ–∫–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - AstroNeko</title>
    <link rel="icon" href="images/favicon.png" type="image/png">
    <link rel="stylesheet" href="style/stats.css">
</head>
<body>
    <div class="stats-container">
        <div class="stats-header">
            <div class="stats-title">
                <h1>üìä –õ–æ–∫–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ AstroNeko</h1>
                <p>–í–∞—à–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤</p>
            </div>
            <div>
                <button class="btn" onclick="loadStats()">üîÑ –û–Ω–æ–≤–∏—Ç–∏</button>
                <button class="btn btn-danger" onclick="clearStats()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏</button>
                <button class="btn btn-success" onclick="exportStats()">üì§ –ï–∫—Å–ø–æ—Ä—Ç</button>
            </div>
        </div>
        
        <div class="warning">
            ‚ö†Ô∏è –¶—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —É –≤–∞—à–æ–º—É –±—Ä–∞—É–∑–µ—Ä—ñ. 
            –î–∞–Ω—ñ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä —ñ –¥–æ—Å—Ç—É–ø–Ω—ñ —Ç—ñ–ª—å–∫–∏ –≤–∞–º.
        </div>

        <input type="text" class="search-box" id="searchInput" placeholder="üîç –ü–æ—à—É–∫ –ø–æ –∞–Ω—ñ–º–µ, —Å–µ—Ä—ñ—è—Ö –∞–±–æ –¥–∞—Ç–∞—Ö..." onkeyup="filterStats()">

        <div class="tabs">
            <div class="tab active" onclick="switchTab('overview')">üìà –û–≥–ª—è–¥</div>
            <div class="tab" onclick="switchTab('anime')">üéå –ê–Ω—ñ–º–µ</div>
            <div class="tab" onclick="switchTab('episodes')">üé¨ –°–µ—Ä—ñ—ó</div>
            <div class="tab" onclick="switchTab('timeline')">üïí –•—Ä–æ–Ω–æ–ª–æ–≥—ñ—è</div>
            <div class="tab" onclick="switchTab('player')">üéÆ –ü–ª–µ—î—Ä</div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –û–≥–ª—è–¥ -->
        <div id="overview" class="tab-content active">
            <div class="stat-grid">
                <div class="stat-card">
                    <h3>–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å</h3>
                    <div class="stat-number" id="totalVisits">0</div>
                    <small>–£—Å—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Å–∞–π—Ç—É</small>
                </div>
                
                <div class="stat-card">
                    <h3>–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç—ñ –∞–Ω—ñ–º–µ</h3>
                    <div class="stat-number" id="uniqueAnime">0</div>
                    <small>–£–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∞–Ω—ñ–º–µ</small>
                </div>
                
                <div class="stat-card">
                    <h3>–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç—ñ —Å–µ—Ä—ñ—ó</h3>
                    <div class="stat-number" id="totalEpisodes">0</div>
                    <small>–í—Å—å–æ–≥–æ —Å–µ—Ä—ñ–π</small>
                </div>

                <div class="stat-card">
                    <h3>–ß–∞—Å –ø–µ—Ä–µ–≥–ª—è–¥—É</h3>
                    <div class="stat-number" id="watchTime">0h</div>
                    <small>–ü—Ä–∏–±–ª–∏–∑–Ω–∏–π —á–∞—Å</small>
                </div>
            </div>

            <div class="stat-grid">
                <div class="stat-card">
                    <h3>–ù–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à—ñ –∞–Ω—ñ–º–µ</h3>
                    <div class="page-list" id="popularAnime"></div>
                </div>
                
                <div class="stat-card">
                    <h3>–û—Å—Ç–∞–Ω–Ω—ñ –ø–µ—Ä–µ–≥–ª—è–¥–∏</h3>
                    <div class="page-list" id="recentVisits"></div>
                </div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –ê–Ω—ñ–º–µ -->
        <div id="anime" class="tab-content">
            <div class="stat-card">
                <h3>üì∫ –í—Å—è —ñ—Å—Ç–æ—Ä—ñ—è –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤ –∞–Ω—ñ–º–µ</h3>
                <div class="page-list" id="animeHistory"></div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –°–µ—Ä—ñ—ó -->
        <div id="episodes" class="tab-content">
            <div class="stat-card">
                <h3>üé¨ –î–µ—Ç–∞–ª—å–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è —Å–µ—Ä—ñ–π</h3>
                <div class="page-list" id="episodeHistory"></div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –•—Ä–æ–Ω–æ–ª–æ–≥—ñ—è -->
        <div id="timeline" class="tab-content">
            <div class="stat-card">
                <h3>üïí –•—Ä–æ–Ω–æ–ª–æ–≥—ñ—è –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤</h3>
                <div class="page-list" id="timelineHistory"></div>
            </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –ü–ª–µ—î—Ä -->
        <div id="player" class="tab-content">
            <div class="stat-card">
                <h3>üéÆ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–µ—î—Ä–∞</h3>
                <div class="page-list" id="playerStats"></div>
            </div>
        </div>
    </div>

    <script>
        let currentStats = null;
        let currentTab = 'overview';

        function switchTab(tabName) {
            // –•–æ–≤–∞—î–º–æ –≤—Å—ñ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—É—î–º–æ –æ–±—Ä–∞–Ω—É –≤–∫–ª–∞–¥–∫—É
            document.getElementById(tabName).classList.add('active');
            document.querySelector(`.tab[onclick="switchTab('${tabName}')"]`).classList.add('active');
            currentTab = tabName;
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –∫–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–∫–∏
            if (currentStats) {
                updateTabContent(tabName, currentStats);
            }
        }

        function filterStats() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            if (currentStats) {
                updateTabContent(currentTab, currentStats, searchTerm);
            }
        }

        function loadStats() {
            const stats = GitHubTracker.getLocalStats();
            currentStats = stats;
            
            updateOverview(stats);
            updateTabContent(currentTab, stats);
        }

        function updateOverview(stats) {
            document.getElementById('totalVisits').textContent = stats.totalVisits.toLocaleString();
            document.getElementById('uniqueAnime').textContent = stats.uniqueAnime.toLocaleString();
            document.getElementById('totalEpisodes').textContent = stats.totalEpisodes.toLocaleString();
            document.getElementById('watchTime').textContent = stats.totalWatchTime;
            
            // –ü–æ–ø—É–ª—è—Ä–Ω—ñ –∞–Ω—ñ–º–µ
            const popularAnime = Object.entries(stats.animeStats)
                .sort((a, b) => b[1].visits - a[1].visits)
                .slice(0, 10);
            
            document.getElementById('popularAnime').innerHTML = popularAnime.length > 0 
                ? popularAnime.map(([anime, data]) => `
                    <div class="page-item">
                        <div>
                            <div class="anime-title">${anime}</div>
                            <div class="episode-info">${data.episodes} —Å–µ—Ä—ñ–π ‚Ä¢ ${data.lastVisit ? new Date(data.lastVisit).toLocaleDateString() : 'N/A'}</div>
                        </div>
                        <span style="color: #ff69b4">${data.visits}</span>
                    </div>
                `).join('')
                : '<p>–©–µ –Ω–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–æ –∂–æ–¥–Ω–æ–≥–æ –∞–Ω—ñ–º–µ</p>';
            
            // –û—Å—Ç–∞–Ω–Ω—ñ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—è
            document.getElementById('recentVisits').innerHTML = stats.recentVisits.length > 0
                ? stats.recentVisits.map(visit => `
                    <div class="page-item">
                        <div>
                            <div>${visit.page}</div>
                            <div class="time-info">${new Date(visit.timestamp).toLocaleString()}</div>
                        </div>
                        <span style="color: #ff69b4">${visit.type || '–ø–µ—Ä–µ–≥–ª—è–¥'}</span>
                    </div>
                `).join('')
                : '<p>–ù–µ–º–∞—î –Ω–µ–¥–∞–≤–Ω—ñ—Ö –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å</p>';
        }

        function updateTabContent(tabName, stats, searchTerm = '') {
            switch(tabName) {
                case 'anime':
                    updateAnimeTab(stats, searchTerm);
                    break;
                case 'episodes':
                    updateEpisodesTab(stats, searchTerm);
                    break;
                case 'timeline':
                    updateTimelineTab(stats, searchTerm);
                    break;
                case 'player':
                    updatePlayerTab(stats, searchTerm);
                    break;
            }
        }

        function updateAnimeTab(stats, searchTerm = '') {
            let animeList = Object.entries(stats.animeStats)
                .sort((a, b) => b[1].visits - a[1].visits);
            
            if (searchTerm) {
                animeList = animeList.filter(([anime]) => 
                    anime.toLowerCase().includes(searchTerm)
                );
            }
            
            document.getElementById('animeHistory').innerHTML = animeList.length > 0 
                ? animeList.map(([anime, data]) => `
                    <div class="page-item">
                        <div style="flex: 1;">
                            <div class="anime-title">${anime}</div>
                            <div class="episode-info">
                                ${data.episodes} —Å–µ—Ä—ñ–π ‚Ä¢ 
                                ${data.visits} –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å ‚Ä¢ 
                                –û—Å—Ç–∞–Ω–Ω—ñ–π —Ä–∞–∑: ${data.lastVisit ? new Date(data.lastVisit).toLocaleDateString() : 'N/A'}
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${Math.min((data.visits / Math.max(...Object.values(stats.animeStats).map(a => a.visits))) * 100, 100)}%"></div>
                            </div>
                        </div>
                    </div>
                `).join('')
                : '<p>–ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∞–Ω—ñ–º–µ –∑–∞ –≤–∞—à–∏–º –∑–∞–ø–∏—Ç–æ–º</p>';
        }

        function updateEpisodesTab(stats, searchTerm = '') {
            let episodes = [...stats.episodeHistory].reverse();
            
            if (searchTerm) {
                episodes = episodes.filter(episode => 
                    episode.animeTitle?.toLowerCase().includes(searchTerm) ||
                    episode.episode?.toLowerCase().includes(searchTerm)
                );
            }
            
            document.getElementById('episodeHistory').innerHTML = episodes.length > 0
                ? episodes.map(episode => `
                    <div class="page-item">
                        <div style="flex: 1;">
                            <div class="anime-title">${episode.animeTitle || '–ù–µ–≤—ñ–¥–æ–º–µ –∞–Ω—ñ–º–µ'}</div>
                            <div class="episode-info">
                                ${episode.episode || '–°–µ—Ä—ñ—è'} ‚Ä¢ 
                                ${episode.duration ? `–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: ${episode.duration}` : ''}
                            </div>
                            <div class="time-info">
                                ${new Date(episode.timestamp).toLocaleString()} ‚Ä¢ 
                                ${episode.progress ? `–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–æ: ${episode.progress}` : ''}
                            </div>
                        </div>
                    </div>
                `).join('')
                : '<p>–ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ —Å–µ—Ä—ñ–π –∑–∞ –≤–∞—à–∏–º –∑–∞–ø–∏—Ç–æ–º</p>';
        }

        function updateTimelineTab(stats, searchTerm = '') {
            let timeline = [...stats.recentVisits].reverse();
            
            if (searchTerm) {
                timeline = timeline.filter(visit => 
                    visit.page.toLowerCase().includes(searchTerm) ||
                    (visit.animeTitle && visit.animeTitle.toLowerCase().includes(searchTerm))
                );
            }
            
            document.getElementById('timelineHistory').innerHTML = timeline.length > 0
                ? timeline.map(visit => `
                    <div class="page-item">
                        <div style="flex: 1;">
                            <div>
                                <span class="anime-title">${visit.animeTitle || visit.page}</span>
                                <span style="margin-left: 10px; color: #cc6096; font-size: 0.9em;">${visit.type || '–≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—è'}</span>
                            </div>
                            <div class="time-info">
                                ${new Date(visit.timestamp).toLocaleString()} ‚Ä¢ 
                                ${visit.duration ? `–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: ${visit.duration}` : ''}
                            </div>
                        </div>
                    </div>
                `).join('')
                : '<p>–ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å—ñ–≤ –∑–∞ –≤–∞—à–∏–º –∑–∞–ø–∏—Ç–æ–º</p>';
        }

        function updatePlayerTab(stats, searchTerm = '') {
            const playerStats = stats.playerStats || {};
            const qualityStats = playerStats.qualityUsage || {};
            const audioStats = playerStats.audioUsage || {};
            
            document.getElementById('playerStats').innerHTML = `
                <div class="page-item">
                    <div>–£—Å—å–æ–≥–æ —Å–µ—Å—ñ–π –ø–ª–µ—î—Ä–∞</div>
                    <span style="color: #ff69b4">${playerStats.totalSessions || 0}</span>
                </div>
                <div class="page-item">
                    <div>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ—Å–∫—ñ–ø—É</div>
                    <span style="color: #ff69b4">${playerStats.autoSkipEnabled ? '–£–≤—ñ–º–∫–Ω–µ–Ω–æ' : '–í–∏–º–∫–Ω–µ–Ω–æ'}</span>
                </div>
                <div class="page-item">
                    <div>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è</div>
                    <span style="color: #ff69b4">${playerStats.autoNextEnabled ? '–£–≤—ñ–º–∫–Ω–µ–Ω–æ' : '–í–∏–º–∫–Ω–µ–Ω–æ'}</span>
                </div>
                <div style="margin: 20px 0; border-top: 1px solid rgba(255,105,180,0.3); padding-top: 20px;">
                    <h4>–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —è–∫–æ—Å—Ç—ñ –≤—ñ–¥–µ–æ:</h4>
                    ${Object.entries(qualityStats).map(([quality, count]) => `
                        <div class="page-item">
                            <div>${quality}p</div>
                            <span style="color: #ff69b4">${count} —Ä–∞–∑—ñ–≤</span>
                        </div>
                    `).join('')}
                </div>
                <div style="margin: 20px 0; border-top: 1px solid rgba(255,105,180,0.3); padding-top: 20px;">
                    <h4>–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –æ–∑–≤—É—á–æ–∫:</h4>
                    ${Object.entries(audioStats).map(([audio, count]) => `
                        <div class="page-item">
                            <div>${audio}</div>
                            <span style="color: #ff69b4">${count} —Ä–∞–∑—ñ–≤</span>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function clearStats() {
            if (confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É? –¶—é –¥—ñ—é –Ω–µ –º–æ–∂–Ω–∞ —Å–∫–∞—Å—É–≤–∞—Ç–∏.')) {
                localStorage.removeItem('astro_neko_visits');
                localStorage.removeItem('astro_neko_player_stats');
                loadStats();
            }
        }

        function exportStats() {
            const stats = GitHubTracker.getLocalStats();
            const dataStr = JSON.stringify(stats, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `astro-neko-stats-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
        }

        // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        document.addEventListener('DOMContentLoaded', loadStats);
    </script>
    
    <script>
        class GitHubTracker {
            static getLocalStats() {
                try {
                    const visits = JSON.parse(localStorage.getItem('astro_neko_visits') || '[]');
                    const playerStats = JSON.parse(localStorage.getItem('astro_neko_player_stats') || '{}');
                    
                    // –ê–Ω–∞–ª—ñ–∑—É—î–º–æ –¥–∞–Ω—ñ
                    const pageStats = {};
                    const animeStats = {};
                    const episodeHistory = [];
                    let totalEpisodes = 0;
                    let totalWatchTime = 0;

                    visits.forEach(visit => {
                        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö
                        pageStats[visit.page] = (pageStats[visit.page] || 0) + 1;
                        
                        // –í–∏—è–≤–ª—è—î–º–æ –∞–Ω—ñ–º–µ –∑ URL
                        const animeData = this.extractAnimeData(visit);
                        if (animeData.animeTitle) {
                            if (!animeStats[animeData.animeTitle]) {
                                animeStats[animeData.animeTitle] = {
                                    visits: 0,
                                    episodes: 0,
                                    lastVisit: null
                                };
                            }
                            animeStats[animeData.animeTitle].visits++;
                            animeStats[animeData.animeTitle].lastVisit = visit.timestamp;
                            
                            if (animeData.isEpisode) {
                                animeStats[animeData.animeTitle].episodes++;
                                totalEpisodes++;
                            }
                            
                            // –î–æ–¥–∞—î–º–æ –≤ —ñ—Å—Ç–æ—Ä—ñ—é –µ–ø—ñ–∑–æ–¥—ñ–≤
                            if (animeData.isEpisode || animeData.isMovie) {
                                episodeHistory.push({
                                    ...animeData,
                                    timestamp: visit.timestamp,
                                    type: animeData.isMovie ? '—Ñ—ñ–ª—å–º' : '—Å–µ—Ä—ñ—è'
                                });
                            }
                        }
                        
                        // –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ –ø—Ä–∏–±–ª–∏–∑–Ω–∏–π —á–∞—Å –ø–µ—Ä–µ–≥–ª—è–¥—É
                        if (visit.duration) {
                            totalWatchTime += this.parseDuration(visit.duration);
                        }
                    });

                    // –§–æ—Ä–º–∞—Ç—É—î–º–æ —á–∞—Å –ø–µ—Ä–µ–≥–ª—è–¥—É
                    const watchTimeFormatted = this.formatWatchTime(totalWatchTime);
                    
                    return {
                        totalVisits: visits.length,
                        uniquePages: Object.keys(pageStats).length,
                        uniqueAnime: Object.keys(animeStats).length,
                        totalEpisodes: totalEpisodes,
                        totalWatchTime: watchTimeFormatted,
                        pageStats: pageStats,
                        animeStats: animeStats,
                        episodeHistory: episodeHistory,
                        recentVisits: visits.slice(-20).reverse(),
                        playerStats: playerStats,
                        firstVisit: visits[0] ? new Date(visits[0].timestamp).toLocaleDateString() : 'N/A'
                    };
                } catch (error) {
                    return { 
                        totalVisits: 0, 
                        uniquePages: 0, 
                        uniqueAnime: 0,
                        totalEpisodes: 0,
                        totalWatchTime: '0h',
                        pageStats: {},
                        animeStats: {},
                        episodeHistory: [],
                        recentVisits: [],
                        playerStats: {},
                        firstVisit: 'N/A'
                    };
                }
            }

            static extractAnimeData(visit) {
                const url = visit.page;
                const result = {
                    animeTitle: null,
                    episode: null,
                    isEpisode: false,
                    isMovie: false,
                    duration: null
                };

                // –ê–Ω–∞–ª—ñ–∑—É—î–º–æ URL –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∞–Ω—ñ–º–µ
                if (url.includes('anime-info.html')) {
                    const params = new URLSearchParams(url.split('?')[1]);
                    const animeId = params.get('id');
                    result.animeTitle = this.getAnimeTitle(animeId) || `–ê–Ω—ñ–º–µ ${animeId}`;
                }
                else if (url.includes('player.html')) {
                    const params = new URLSearchParams(url.split('?')[1]);
                    const animeId = params.get('id');
                    result.animeTitle = this.getAnimeTitle(animeId) || `–ê–Ω—ñ–º–µ ${animeId}`;
                    
                    if (params.get('season') && params.get('episode')) {
                        result.episode = `–°–µ–∑–æ–Ω ${params.get('season')} –°–µ—Ä—ñ—è ${params.get('episode')}`;
                        result.isEpisode = true;
                    }
                    else if (params.get('movie')) {
                        result.episode = `–§—ñ–ª—å–º ${params.get('movie')}`;
                        result.isMovie = true;
                    }
                }

                return result;
            }

            static getAnimeTitle(animeId) {
                // –¢—É—Ç –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞–∑–≤–∏ –∞–Ω—ñ–º–µ –ø–æ ID
                // –ù–∞—Ä–∞–∑—ñ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ ID
                return animeId;
            }

            static parseDuration(durationStr) {
                // –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ "24m" –∞–±–æ "1h 30m" —É —Ö–≤–∏–ª–∏–Ω–∏
                if (!durationStr) return 0;
                
                let minutes = 0;
                const hoursMatch = durationStr.match(/(\d+)h/);
                const minsMatch = durationStr.match(/(\d+)m/);
                
                if (hoursMatch) minutes += parseInt(hoursMatch[1]) * 60;
                if (minsMatch) minutes += parseInt(minsMatch[1]);
                
                return minutes;
            }

            static formatWatchTime(minutes) {
                if (minutes < 60) {
                    return `${minutes}m`;
                } else {
                    const hours = Math.floor(minutes / 60);
                    const mins = minutes % 60;
                    return mins > 0 ? `${hours}h ${mins}m` : `${hours}h`;
                }
            }
        }
    </script>
</body>
</html>